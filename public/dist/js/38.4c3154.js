(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{71:function(r,e,t){"use strict";t.r(e);var s=t(0),o=t.n(s),a=t(3),i=t.n(a),n=(t(2),t(4));function l(r,e,t,s,o,a,i){try{var n=r[a](i),l=n.value}catch(r){return void t(r)}n.done?e(l):Promise.resolve(l).then(s,o)}function c(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,s)}return t}function m(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?c(Object(t),!0).forEach((function(e){d(r,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}function d(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var f={name:"CreateUser",middleware:["auth","permission:add-user"],data:function(){return{form:new i.a({role_id:"",name:"",emai:"",password:"",password_confirmation:[]})}},created:function(){this.$store.dispatch("management/fetchAllRoles",{search:this.filter})},computed:m(m({},Object(n.c)({roles:function(r){return r.management.all_roles}})),{},{getRoles:function(){return this.roles.filter((function(r){return"employer"!=r.name}))}}),methods:{addUser:function(){var r,e=this;return(r=o.a.mark((function r(){var t,s;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.form.post("/api/users/add");case 3:t=r.sent,s=t.data,e.$alert(s.message,s.status),e.$router.push("/users"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})),function(){var e=this,t=arguments;return new Promise((function(s,o){var a=r.apply(e,t);function i(r){l(a,s,o,i,n,"next",r)}function n(r){l(a,s,o,i,n,"throw",r)}i(void 0)}))})()}}},u=t(1),v=Object(u.a)(f,(function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",[t("Breadcrumbs",{attrs:{title:"Add User",main:"Users"}}),r._v(" "),t("div",{staticClass:"container-fluid"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"card"},[r._m(0),r._v(" "),t("div",{staticClass:"card-body"},[t("b-form",{staticClass:"needs-validation",on:{submit:function(e){return e.preventDefault(),r.addUser(e)}}},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"col"},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[r._v("Select Role:")]),r._v(" "),t("div",{staticClass:"col-sm-9"},[t("select",{directives:[{name:"model",rawName:"v-model",value:r.form.role_id,expression:"form.role_id"}],staticClass:"form-control",class:{"is-invalid":r.form.errors.has("role_id")},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(r){return r.selected})).map((function(r){return"_value"in r?r._value:r.value}));r.$set(r.form,"role_id",e.target.multiple?t:t[0])}}},[t("option",{attrs:{value:""}},[r._v("Select Role")]),r._v(" "),r._l(r.getRoles,(function(e,s){return t("option",{key:s,domProps:{value:e.id}},[r._v(r._s(e.display_name))])}))],2),r._v(" "),t("has-error",{attrs:{form:r.form,field:"role_id"}})],1)]),r._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[r._v("Name:")]),r._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.form.name,expression:"form.name"}],staticClass:"form-control",class:{"is-invalid":r.form.errors.has("name")},attrs:{type:"text"},domProps:{value:r.form.name},on:{input:function(e){e.target.composing||r.$set(r.form,"name",e.target.value)}}}),r._v(" "),t("has-error",{attrs:{form:r.form,field:"name"}})],1)]),r._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[r._v("Email:")]),r._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":r.form.errors.has("email")},attrs:{type:"email"},domProps:{value:r.form.email},on:{input:function(e){e.target.composing||r.$set(r.form,"email",e.target.value)}}}),r._v(" "),t("has-error",{attrs:{form:r.form,field:"email"}})],1)]),r._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[r._v("Password:")]),r._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.form.password,expression:"form.password"}],staticClass:"form-control",class:{"is-invalid":r.form.errors.has("password")},attrs:{type:"password"},domProps:{value:r.form.password},on:{input:function(e){e.target.composing||r.$set(r.form,"password",e.target.value)}}}),r._v(" "),t("has-error",{attrs:{form:r.form,field:"password"}})],1)]),r._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[r._v("Confirm Password:")]),r._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.form.password_confirmation,expression:"form.password_confirmation"}],staticClass:"form-control",class:{"is-invalid":r.form.errors.has("password_confirmation")},attrs:{type:"password"},domProps:{value:r.form.password_confirmation},on:{input:function(e){e.target.composing||r.$set(r.form,"password_confirmation",e.target.value)}}}),r._v(" "),t("has-error",{attrs:{form:r.form,field:"password_confirmation"}})],1)])]),r._v(" "),t("div",{staticClass:"col-12 text-right"},[t("v-button",{attrs:{loading:r.form.busy}},[r._v("Add User")])],1)])])],1)])])])])],1)}),[function(){var r=this.$createElement,e=this._self._c||r;return e("div",{staticClass:"card-header"},[e("h5",[this._v("Add User")]),e("span",[this._v("Create a new user")])])}],!1,null,null,null);e.default=v.exports}}]);