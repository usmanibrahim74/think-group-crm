(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{18:function(t,e,a){"use strict";a.r(e);var i=a(0),s=a.n(i),r=a(4),n=a(2),l=a.n(n);a(3);function c(t,e,a,i,s,r,n){try{var l=t[r](n),c=l.value}catch(t){return void a(t)}l.done?e(c):Promise.resolve(c).then(i,s)}function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var u={name:"ViewCandidates",middleware:["auth","permission:view-candidate"],data:function(){return{tableFields:[{key:"name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"city",label:"City",sortable:!0},{key:"notes",label:"Notes",sortable:!0},"actions"],filter:"",pageOptions:[5,10,15],delete_id:0,timeout:0,radius:5,radiusOptions:[5,10,20,30,40,50,60,70,80,90,100],department:"All",departments:["All","Healthcare","Education"]}},created:function(){this.fetchData()},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){d(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(r.c)({candidates:function(t){return t.candidates.candidates}})),methods:{remove:function(){var t,e=this;return(t=s.a.mark((function t(){var a,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.delete("/api/candidates/"+e.delete_id);case 3:a=t.sent,i=a.data,e.fetchData(),e.$alert(i.message,i.status),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e.$error("some error occurred");case 13:case"end":return t.stop()}}),t,null,[[0,9]])})),function(){var e=this,a=arguments;return new Promise((function(i,s){var r=t.apply(e,a);function n(t){c(r,i,s,n,l,"next",t)}function l(t){c(r,i,s,n,l,"throw",t)}n(void 0)}))})()},filterData:function(){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.fetchData()}),300)},fetchData:function(){var t=this.department;"All"==t&&(t=""),t=t.toLowerCase(),this.$store.dispatch("candidates/fetchCandidates",{search:this.filter,department:t})}},watch:{$route:{handler:function(){this.fetchData()}},filter:{handler:function(){this.filterData()}},"candidates.page":{handler:function(){this.filterData()}},"candidates.perPage":{handler:function(){this.filterData()}}}},p=a(1),f=Object(p.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Breadcrumbs",{attrs:{title:"Candidates"}}),t._v(" "),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header d-flex justify-content-between"},[t._m(0),t._v(" "),t.$can("filter-by-department")?a("div",{staticClass:"card-buttons",staticStyle:{"flex-basis":"30%"}},[a("div",{staticClass:"form-group d-flex align-items-center"},[a("label",{staticClass:"d-block mr-2 mb-0",staticStyle:{"white-space":"nowrap"}},[t._v("Filter By Department:")]),t._v(" "),a("b-form-select",{attrs:{options:t.departments},on:{input:t.fetchData},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}})],1)]):t._e()]),t._v(" "),a("div",{staticClass:"card-body"},[a("b-row",[a("b-col",{attrs:{md:"3"}},[a("b-input-group",{},[a("b-form-input",{attrs:{placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-append",[a("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1),t._v(" "),a("b-col",{attrs:{md:"3",offset:"1"}},[a("b-input-group",{},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.radius,expression:"radius"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.radius=e.target.multiple?a:a[0]}}},t._l(t.radiusOptions,(function(e,i){return a("option",{key:i,domProps:{value:e}},[t._v(t._s(e)+" Miles")])})),0),t._v(" "),a("b-input-group-append",[a("b-button",[t._v("Filter")])],1)],1)],1),t._v(" "),a("b-col",{attrs:{md:"5"}},[a("b-form-group",{staticClass:"mb-0 datatable-select",attrs:{"label-cols":"2",label:"Per page"}},[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.candidates.perPage,callback:function(e){t.$set(t.candidates,"perPage",e)},expression:"candidates.perPage"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"table-responsive datatable-vue"},[a("b-table",{attrs:{"show-empty":"",stacked:"md",items:t.candidates.data,fields:t.tableFields},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[t.$can("view-candidate")?a("router-link",{staticClass:"text-muted",attrs:{title:"View",to:{name:"candidates.view",params:{id:e.item.id}}}},[a("i",{staticClass:"fa fa-eye"})]):t._e(),t._v(" "),t.$can("update-candidate")?a("router-link",{staticClass:"text-muted",attrs:{title:"Edit",to:{name:"candidates.edit",params:{id:e.item.id}}}},[a("i",{staticClass:"fa fa-edit"})]):t._e(),t._v(" "),t.$can("delete-candidate")?a("a",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-delete-candidate",modifiers:{"modal-delete-candidate":!0}}],staticClass:"text-muted",attrs:{href:"#",title:"Delete"},on:{click:function(a){a.preventDefault(),t.delete_id=e.item.id}}},[a("i",{staticClass:"fa fa-trash"})]):t._e()]}}])})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.candidates.count,"per-page":t.candidates.perPage},model:{value:t.candidates.page,callback:function(e){t.$set(t.candidates,"page",e)},expression:"candidates.page"}})],1)],1)])])])]),t._v(" "),a("b-modal",{staticClass:"theme-modal",attrs:{id:"modal-delete-candidate",size:"sm",centered:"",title:"Delete Candidate","ok-title":"Delete","ok-variant":"danger"},on:{ok:t.remove}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",[t._v("Are you sure you want to delete this candidate?")])])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-title"},[e("h5",[this._v("Candidates")]),e("span",[this._v("List of all Candidates")])])}],!1,null,null,null);e.default=f.exports}}]);