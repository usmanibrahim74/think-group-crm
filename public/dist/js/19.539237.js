(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{49:function(t,e,a){"use strict";a.r(e);var s=a(0),r=a.n(s),o=a(3),i=a.n(o),l=a(2),n=a.n(l),d=a(4),c=a(13);function m(t,e,a,s,r,o,i){try{var l=t[o](i),n=l.value}catch(t){return void a(t)}l.done?e(n):Promise.resolve(n).then(s,r)}function f(t){return function(){var e=this,a=arguments;return new Promise((function(s,r){var o=t.apply(e,a);function i(t){m(o,s,r,i,l,"next",t)}function l(t){m(o,s,r,i,l,"throw",t)}i(void 0)}))}}function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function v(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var p={name:"EditCandidate",middleware:["auth","permission:update-candidate"],data:function(){return{form:new i.a({_method:"PUT",title:"",first_name:"",last_name:"",date_of_birth:"",email:"",contact:"",address_1:"",address_2:"",city:"",postcode:"",current_salary:"",desired_salary:"",notes:"",industries:[],documents:null}),delete_id:0}},components:{Multiselect:a.n(c).a},created:function(){this.$store.dispatch("candidates/fetchAllIndustries");var t=this.$route.params.id;this.$store.dispatch("candidates/fetchCandidate",{candidate_id:t})},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){v(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(d.c)({industries:function(t){return t.candidates.all_industries},candidate:function(t){return t.candidates.candidate}})),methods:{update:function(){var t=this;return f(r.a.mark((function e(){var a,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.objectToFormData,e.prev=1,e.next=4,t.form.post("/api/candidates/"+t.candidate.id,{transformRequest:[function(t,e){return a(t)}]});case 4:s=e.sent,o=s.data,t.$alert(o.message,o.status),t.$router.push("/candidates"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t.$error("some error occurred");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},remove:function(){var t=this;return f(r.a.mark((function e(){var a,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.candidate.uploads.findIndex((function(e){return e.id==t.delete_id})),e.next=4,n.a.delete("/api/uploads/"+t.delete_id);case 4:s=e.sent,o=s.data,t.candidate.uploads.splice(a,1),t.$alert(o.message,o.status),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$error("some error occurred");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()}},watch:{candidate:{deep:!0,handler:function(){this.form.title=this.candidate.title,this.form.first_name=this.candidate.first_name,this.form.last_name=this.candidate.last_name,this.form.date_of_birth=this.candidate.date_of_birth,this.form.email=this.candidate.email,this.form.contact=this.candidate.contact,this.form.address_1=this.candidate.address_1,this.form.address_2=this.candidate.address_2,this.form.city=this.candidate.city,this.form.postcode=this.candidate.postcode,this.form.current_salary=this.candidate.current_salary,this.form.desired_salary=this.candidate.desired_salary,this.form.notes=this.candidate.notes,this.form.industries=this.candidate.industries}}}},_=(a(17),a(1)),h=Object(_.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Breadcrumbs",{attrs:{title:"Edit Candidate",main:"Candidates"}}),t._v(" "),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body"},[a("b-form",{staticClass:"needs-validation",on:{submit:function(e){return e.preventDefault(),t.update(e)}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Title")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("title")},attrs:{type:"text"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"title"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("First Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.first_name,expression:"form.first_name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("first_name")},attrs:{type:"text"},domProps:{value:t.form.first_name},on:{input:function(e){e.target.composing||t.$set(t.form,"first_name",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"first_name"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Last Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.last_name,expression:"form.last_name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("last_name")},attrs:{type:"text"},domProps:{value:t.form.last_name},on:{input:function(e){e.target.composing||t.$set(t.form,"last_name",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"last_name"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("email")},attrs:{type:"email"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"email"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Date of birth")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.date_of_birth,expression:"form.date_of_birth"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("date_of_birth")},attrs:{type:"date"},domProps:{value:t.form.date_of_birth},on:{input:function(e){e.target.composing||t.$set(t.form,"date_of_birth",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"date_of_birth"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Contact")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.contact,expression:"form.contact",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("contact")},attrs:{type:"number"},domProps:{value:t.form.contact},on:{input:function(e){e.target.composing||t.$set(t.form,"contact",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"contact"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Address Line 1")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address_1,expression:"form.address_1"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("address_1")},attrs:{type:"text"},domProps:{value:t.form.address_1},on:{input:function(e){e.target.composing||t.$set(t.form,"address_1",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"address_1"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Address Line 2")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address_2,expression:"form.address_2"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("address_2")},attrs:{type:"text"},domProps:{value:t.form.address_2},on:{input:function(e){e.target.composing||t.$set(t.form,"address_2",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"address_2"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("City")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.city,expression:"form.city"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("city")},attrs:{type:"text"},domProps:{value:t.form.city},on:{input:function(e){e.target.composing||t.$set(t.form,"city",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"city"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Postcode")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.postcode,expression:"form.postcode"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("postcode")},attrs:{type:"text"},domProps:{value:t.form.postcode},on:{input:function(e){e.target.composing||t.$set(t.form,"postcode",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"postcode"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Current Salary")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.current_salary,expression:"form.current_salary"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("current_salary")},attrs:{type:"text"},domProps:{value:t.form.current_salary},on:{input:function(e){e.target.composing||t.$set(t.form,"current_salary",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"current_salary"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Desired Salary")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.desired_salary,expression:"form.desired_salary"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("desired_salary")},attrs:{type:"text"},domProps:{value:t.form.desired_salary},on:{input:function(e){e.target.composing||t.$set(t.form,"desired_salary",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"desired_salary"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Industries")]),t._v(" "),a("multiselect",{class:{"is-invalid":t.form.errors.has("industries")},attrs:{placeholder:"Search industries",label:"name","track-by":"id",options:t.industries,multiple:!0},model:{value:t.form.industries,callback:function(e){t.$set(t.form,"industries",e)},expression:"form.industries"}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"industries"}})],1)]),t._v(" "),a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Notes")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.notes,expression:"form.notes"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("notes")},domProps:{value:t.form.notes},on:{input:function(e){e.target.composing||t.$set(t.form,"notes",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"notes"}})],1)]),t._v(" "),a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[t._v("Documents")]),t._v(" "),a("b-form-file",{class:{"is-invalid":t.form.errors.has("documents")},attrs:{multiple:"",state:Boolean(t.form.documents),placeholder:"Choose files","drop-placeholder":"Drop files here..."},model:{value:t.form.documents,callback:function(e){t.$set(t.form,"documents",e)},expression:"form.documents"}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"documents"}})],1)]),t._v(" "),t.candidate&&t.candidate.uploads.length?a("div",{staticClass:"col-12 mb-3"},[a("b-list-group",{attrs:{tag:"ul"}},t._l(t.candidate.uploads,(function(e,s){return a("b-list-group-item",{key:s,staticClass:"d-flex justify-content-between align-items-center",attrs:{tag:"li"}},[a("span",[t._v(t._s(e.name))]),t._v(" "),a("div",[a("a",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-delete-upload",modifiers:{"modal-delete-upload":!0}}],staticClass:"text-muted",attrs:{href:"#",title:"Delete"},on:{click:function(a){a.preventDefault(),t.delete_id=e.id}}},[a("i",{staticClass:"fa fa-trash"})]),t._v(" "),a("a",{staticClass:"text-muted",attrs:{href:"/storage/"+e.path,title:"Downlod",download:""}},[a("i",{staticClass:"fa fa-download"})])])])})),1)],1):t._e(),t._v(" "),a("div",{staticClass:"col-12 text-right"},[a("v-button",{attrs:{loading:t.form.busy}},[t._v("Update Candidate")])],1)])])],1)])])])]),t._v(" "),a("b-modal",{staticClass:"theme-modal",attrs:{id:"modal-delete-upload",size:"sm",centered:"",title:"Delete Document","ok-title":"Delete","ok-variant":"danger"},on:{ok:t.remove}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",[t._v("Are you sure you want to delete this document?")])])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h5",[this._v("Edit Candidate")]),e("span",[this._v("Edit this candidate")])])}],!1,null,null,null);e.default=h.exports}}]);