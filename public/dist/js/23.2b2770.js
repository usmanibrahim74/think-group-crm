(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{50:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),o=a(3),i=a.n(o),l=a(2),n=a.n(l),c=a(4),d=a(13);function m(e,t,a,s,r,o,i){try{var l=e[o](i),n=l.value}catch(e){return void a(e)}l.done?t(n):Promise.resolve(n).then(s,r)}function f(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var o=e.apply(t,a);function i(e){m(o,s,r,i,l,"next",e)}function l(e){m(o,s,r,i,l,"throw",e)}i(void 0)}))}}function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var p={name:"EditCandidate",middleware:["auth","permission:update-candidate"],data:function(){return{today:(new Date).getTime(),form:new i.a({_method:"PUT",title:"",first_name:"",last_name:"",date_of_birth:"",email:"",contact:"",address_1:"",address_2:"",city:"",postcode:"",current_salary:"",desired_salary:"",notes:"",department_id:"",industries:[],documents:[{name:"CV",file:null,expires_on:null},{name:"Safe CV",file:null,expires_on:null},{name:"DBS Update Service",file:null,expires_on:null},{name:"UK Passport/Work Permit",file:null,expires_on:null},{name:"Passport Photo",file:null,expires_on:null},{name:"Proof of Address 1",file:null,expires_on:null},{name:"Proof of Address 2",file:null,expires_on:null},{name:"Reference 1",file:null,expires_on:null},{name:"Reference 2",file:null,expires_on:null},{name:"National Insurance",file:null,expires_on:null},{name:"DBS Certificate",file:null,expires_on:null},{name:"Training Certificate 1",file:null,expires_on:null},{name:"Training Certificate 2",file:null,expires_on:null},{name:"Training Certificate 3",file:null,expires_on:null},{name:"Healthcare NMC",file:null,expires_on:null}]}),titles:["Mr","Mrs","Miss","Ms","Dr"],delete_id:0}},components:{Multiselect:a.n(d).a},created:function(){this.$store.dispatch("candidates/fetchAllIndustries");var e=this.$route.params.id;this.$store.dispatch("candidates/fetchCandidate",{candidate_id:e})},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){v(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(c.c)({industries:function(e){return e.candidates.all_industries},candidate:function(e){return e.candidates.candidate}})),methods:{update:function(){var e=this;return f(r.a.mark((function t(){var a,s,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.objectToFormData,t.prev=1,t.next=4,e.form.post("/api/candidates/"+e.candidate.id,{transformRequest:[function(e,t){return a(e)}]});case 4:s=t.sent,o=s.data,e.$alert(o.message,o.status),e.$router.push("/candidates"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0),e.$error("some error occurred");case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},remove:function(){var e=this;return f(r.a.mark((function t(){var a,s,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.candidate.uploads.findIndex((function(t){return t.id==e.delete_id})),t.next=4,n.a.delete("/api/uploads/"+e.delete_id);case 4:s=t.sent,o=s.data,e.candidate.uploads.splice(a,1),e.$alert(o.message,o.status),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),e.$error("some error occurred");case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()}},watch:{candidate:{deep:!0,handler:function(){this.form.title=this.candidate.title,this.form.first_name=this.candidate.first_name,this.form.last_name=this.candidate.last_name,this.form.date_of_birth=this.candidate.date_of_birth,this.form.email=this.candidate.email,this.form.contact=this.candidate.contact,this.form.address_1=this.candidate.address_1,this.form.address_2=this.candidate.address_2,this.form.city=this.candidate.city,this.form.postcode=this.candidate.postcode,this.form.current_salary=this.candidate.current_salary,this.form.desired_salary=this.candidate.desired_salary,this.form.notes=this.candidate.notes,this.form.department_id=this.candidate.department_id,this.form.industries=this.candidate.industries}}}},_=(a(15),a(1)),h=Object(_.a)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumbs",{attrs:{title:"Edit Candidate",main:"Candidates"}}),e._v(" "),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[e._m(0),e._v(" "),a("div",{staticClass:"card-body"},[a("b-form",{staticClass:"needs-validation",on:{submit:function(t){return t.preventDefault(),e.update(t)}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("Title:")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.title,expression:"form.title"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("title")},attrs:{placeholder:"Select Title"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"title",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("Select Title")]),e._v(" "),e._l(e.titles,(function(t,s){return a("option",{key:s,domProps:{value:t}},[e._v(e._s(t))])}))],2),e._v(" "),a("has-error",{attrs:{form:e.form,field:"title"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("First Name:")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.first_name,expression:"form.first_name"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("first_name")},attrs:{type:"text"},domProps:{value:e.form.first_name},on:{input:function(t){t.target.composing||e.$set(e.form,"first_name",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"first_name"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("Last Name:")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.last_name,expression:"form.last_name"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("last_name")},attrs:{type:"text"},domProps:{value:e.form.last_name},on:{input:function(t){t.target.composing||e.$set(e.form,"last_name",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"last_name"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("Email")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("email")},attrs:{type:"email"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"email"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("Date of birth")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.date_of_birth,expression:"form.date_of_birth"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("date_of_birth")},attrs:{type:"date"},domProps:{value:e.form.date_of_birth},on:{input:function(t){t.target.composing||e.$set(e.form,"date_of_birth",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"date_of_birth"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("Contact")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.contact,expression:"form.contact",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("contact")},attrs:{type:"number"},domProps:{value:e.form.contact},on:{input:function(t){t.target.composing||e.$set(e.form,"contact",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"contact"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("Address Line 1")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.address_1,expression:"form.address_1"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("address_1")},attrs:{type:"text"},domProps:{value:e.form.address_1},on:{input:function(t){t.target.composing||e.$set(e.form,"address_1",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"address_1"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("Address Line 2")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.address_2,expression:"form.address_2"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("address_2")},attrs:{type:"text"},domProps:{value:e.form.address_2},on:{input:function(t){t.target.composing||e.$set(e.form,"address_2",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"address_2"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("City")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.city,expression:"form.city"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("city")},attrs:{type:"text"},domProps:{value:e.form.city},on:{input:function(t){t.target.composing||e.$set(e.form,"city",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"city"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("Postcode")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.postcode,expression:"form.postcode"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("postcode")},attrs:{type:"text"},domProps:{value:e.form.postcode},on:{input:function(t){t.target.composing||e.$set(e.form,"postcode",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"postcode"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("Current Salary")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.current_salary,expression:"form.current_salary"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("current_salary")},attrs:{type:"text"},domProps:{value:e.form.current_salary},on:{input:function(t){t.target.composing||e.$set(e.form,"current_salary",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"current_salary"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("Desired Salary")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.desired_salary,expression:"form.desired_salary"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("desired_salary")},attrs:{type:"text"},domProps:{value:e.form.desired_salary},on:{input:function(t){t.target.composing||e.$set(e.form,"desired_salary",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"desired_salary"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("Department:")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.department_id,expression:"form.department_id"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("department_id")},attrs:{placeholder:"Select Department"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"department_id",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("Select Department")]),e._v(" "),a("option",{attrs:{value:"1"}},[e._v("Healthcare")]),e._v(" "),a("option",{attrs:{value:"2"}},[e._v("Education")])]),e._v(" "),a("has-error",{attrs:{form:e.form,field:"department_id"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("Industries")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("multiselect",{class:{"is-invalid":e.form.errors.has("industries")},attrs:{placeholder:"Search industries",label:"name","track-by":"id",options:e.industries,multiple:!0},model:{value:e.form.industries,callback:function(t){e.$set(e.form,"industries",t)},expression:"form.industries"}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"industries"}})],1)]),e._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v("Notes")]),e._v(" "),a("div",{staticClass:"col-sm-9"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.notes,expression:"form.notes"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("notes")},domProps:{value:e.form.notes},on:{input:function(t){t.target.composing||e.$set(e.form,"notes",t.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"notes"}})],1)]),e._v(" "),e._l(e.form.documents,(function(t,s){return a("div",{key:s,staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-sm-3"},[e._v(e._s(t.name))]),e._v(" "),a("div",{staticClass:"col-sm-6"},[a("b-form-file",{class:{"is-invalid":e.form.errors.has("documents")},attrs:{state:Boolean(e.form.documents),placeholder:"Choose file","drop-placeholder":"Drop file here..."},model:{value:t.file,callback:function(a){e.$set(t,"file",a)},expression:"document.file"}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"documents"}})],1),e._v(" "),a("div",{staticClass:"col-sm-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.expires_on,expression:"document.expires_on"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("documents")},attrs:{type:"date"},domProps:{value:t.expires_on},on:{input:function(a){a.target.composing||e.$set(t,"expires_on",a.target.value)}}}),e._v(" "),a("has-error",{attrs:{form:e.form,field:"documents"}})],1)])}))],2),e._v(" "),e.candidate&&e.candidate.uploads.length?a("div",{staticClass:"col-12 mb-3"},[a("b-list-group",{attrs:{tag:"ul"}},e._l(e.candidate.uploads,(function(t,s){return a("b-list-group-item",{key:s,staticClass:"d-flex justify-content-between align-items-center",attrs:{tag:"li"}},[a("span",[e._v(e._s(t.name))]),e._v(" "),a("span",{staticClass:"badge",class:"badge-"+t.expire_status},[e._v("Expire"+e._s("danger"==t.expire_status?"d":"s")+" on "+e._s(t.expires_on))]),e._v(" "),a("div",[a("a",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-delete-upload",modifiers:{"modal-delete-upload":!0}}],staticClass:"text-muted",attrs:{href:"#",title:"Delete"},on:{click:function(a){a.preventDefault(),e.delete_id=t.id}}},[a("i",{staticClass:"fa fa-trash"})]),e._v(" "),a("a",{staticClass:"text-muted",attrs:{href:"/storage/"+t.path,title:"Downlod",download:""}},[a("i",{staticClass:"fa fa-download"})])])])})),1)],1):e._e(),e._v(" "),a("div",{staticClass:"col-12 text-right"},[a("v-button",{attrs:{loading:e.form.busy}},[e._v("Update Candidate")])],1)])])],1)])])])]),e._v(" "),a("b-modal",{staticClass:"theme-modal",attrs:{id:"modal-delete-upload",size:"sm",centered:"",title:"Delete Document","ok-title":"Delete","ok-variant":"danger"},on:{ok:e.remove}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",[e._v("Are you sure you want to delete this document?")])])])])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("h5",[this._v("Edit Candidate")]),t("span",[this._v("Edit this candidate")])])}],!1,null,null,null);t.default=h.exports}}]);