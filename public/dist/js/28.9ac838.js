(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{57:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),i=a(4),n=a(2),c=a.n(n),o=a(3),d=a.n(o);function l(e,t,a,s,r,i,n){try{var c=e[i](n),o=c.value}catch(e){return void a(e)}c.done?t(o):Promise.resolve(o).then(s,r)}function u(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var i=e.apply(t,a);function n(e){l(i,s,r,n,c,"next",e)}function c(e){l(i,s,r,n,c,"throw",e)}n(void 0)}))}}function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var b={name:"ViewCandidates",middleware:["auth","permission:manage-employer-candidates"],data:function(){return{tableFields:[{key:"name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"city",label:"City",sortable:!0},{key:"notes",label:"Notes",sortable:!0},"actions"],filter:"",pageOptions:[5,10,15],delete_id:0,timeout:0}},created:function(){this.fetchData();var e=this.$route.params.id;this.$store.dispatch("employers/fetchProfile",{employer_id:e})},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(i.c)({candidates:function(e){return e.candidates.candidates},profile:function(e){return e.employers.profile}})),methods:{remove:function(){var e=this;return u(r.a.mark((function t(){var a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.delete("/api/candidates/"+e.delete_id);case 3:a=t.sent,s=a.data,e.fetchData(),e.$alert(s.message,s.status),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e.$error("some error occurred");case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},filterData:function(){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.fetchData()}),300)},fetchData:function(){this.$store.dispatch("candidates/fetchCandidates",{search:this.filter})},syncCandidates:function(e){var t=this;return u(r.a.mark((function a(){var s,i,n,c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(s=t.profile.candidates.findIndex((function(t){return t.id==e.id})))<0?t.profile.candidates.push(e):t.profile.candidates.splice(s,1),a.prev=2,i=new d.a({candidates:t.profile.candidates}),a.next=6,i.put("/api/employers/profiles/"+t.profile.id+"/candidates");case 6:n=a.sent,c=n.data,t.$alert(c.message,c.status),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(2),console.log(a.t0),t.$error("some error occured");case 15:case"end":return a.stop()}}),a,null,[[2,11]])})))()}},watch:{filter:{handler:function(){this.filterData()}},"candidates.page":{handler:function(){this.filterData()}},"candidates.perPage":{handler:function(){this.filterData()}}}},m=a(1),v=Object(m.a)(b,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumbs",{attrs:{title:"Attach Candidates",main:"Employers  /  Profiles"}}),e._v(" "),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header d-flex justify-content-between"},[a("div",{staticClass:"card-title"},[a("h5",[e._v("Attach Candidates")]),a("span",[e._v("Attach Candidates to "+e._s(e.profile.name))])]),e._v(" "),a("div",{staticClass:"card-buttons"})]),e._v(" "),a("div",{staticClass:"card-body"},[a("b-row",[a("b-col",{attrs:{md:"6"}},[a("b-input-group",{staticClass:"datatable-btn"},[a("b-form-input",{attrs:{placeholder:"Type to Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),a("b-input-group-append",[a("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear")])],1)],1)],1),e._v(" "),a("b-col",{attrs:{md:"6"}},[a("b-form-group",{staticClass:"mb-0 datatable-select",attrs:{"label-cols":"2",label:"Per page"}},[a("b-form-select",{attrs:{options:e.pageOptions},model:{value:e.candidates.perPage,callback:function(t){e.$set(e.candidates,"perPage",t)},expression:"candidates.perPage"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"table-responsive datatable-vue"},[a("b-table",{attrs:{"show-empty":"",stacked:"md",items:e.candidates.data,fields:e.tableFields},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[a("div",{staticClass:"media"},[a("div",{staticClass:"media-body text-center"},[a("label",{staticClass:"switch mb-0"},[a("input",{attrs:{type:"checkbox"},domProps:{checked:e.profile&&e.profile.candidates.findIndex((function(e){return t.item.id==e.id}))>-1},on:{input:function(a){return e.syncCandidates(t.item)}}}),a("span",{staticClass:"switch-state shadow-showcase shadow-sm border"})])])])]}}])})],1),e._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":e.candidates.count,"per-page":e.candidates.perPage},model:{value:e.candidates.page,callback:function(t){e.$set(e.candidates,"page",t)},expression:"candidates.page"}})],1)],1)])])])]),e._v(" "),a("b-modal",{staticClass:"theme-modal",attrs:{id:"modal-delete-candidate",size:"sm",centered:"",title:"Delete Candidate","ok-title":"Delete","ok-variant":"danger"},on:{ok:e.remove}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",[e._v("Are you sure you want to delete this candidate?")])])])])],1)}),[],!1,null,null,null);t.default=v.exports}}]);