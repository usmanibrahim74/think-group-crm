(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{150:function(t,e,a){"use strict";a(86)},151:function(t,e,a){(t.exports=a(8)(!1)).push([t.i,".media-body:after,.media-body:before{content:none}.social-chat .media-body{padding:0;border:none;margin-bottom:20px}",""])},52:function(t,e,a){"use strict";a.r(e);var s=a(0),i=a.n(s),r=a(4),n=a(2),o=a.n(n),c=a(3),l=a.n(c);function d(t,e,a,s,i,r,n){try{var o=t[r](n),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(s,i)}function m(t){return function(){var e=this,a=arguments;return new Promise((function(s,i){var r=t.apply(e,a);function n(t){d(r,s,i,n,o,"next",t)}function o(t){d(r,s,i,n,o,"throw",t)}n(void 0)}))}}function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var p={name:"ShortlistedCandidates",middleware:["auth","permission:view-candidate"],data:function(){return{tableFields:[{key:"name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"city",label:"City",sortable:!0},{key:"notes",label:"Notes",sortable:!0},"actions"],filter:"",pageOptions:[5,10,15],delete_id:0,timeout:0,shortlist:null,shortlistedComment:new l.a({body:""})}},created:function(){this.fetchData()},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(r.c)({user:function(t){return t.auth.user},candidates:function(t){return t.candidates.shortlisted}})),methods:{remove:function(){var t=this;return m(i.a.mark((function e(){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.delete("/api/candidates/"+t.delete_id);case 3:a=e.sent,s=a.data,t.fetchData(),t.$alert(s.message,s.status),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.$error("some error occurred");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},addShortlistedComment:function(){var t=this;return m(i.a.mark((function e(){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.shortlistedComment.post("/api/candidates/shortlist/"+t.shortlist.id+"/comments");case 3:a=e.sent,s=a.data,t.$alert(s.message,s.status),t.shortlistedComment.reset(),t.fetchData(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$error("some error occurred");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},filterData:function(){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.fetchData()}),300)},fetchData:function(){this.$store.dispatch("candidates/fetchShortlisted",{search:this.filter})}},watch:{filter:{handler:function(){this.filterData()}},"candidates.page":{handler:function(){this.filterData()}},"candidates.perPage":{handler:function(){this.filterData()}},candidates:{deep:!0,handler:function(){var t=this;if(this.shortlist){var e=this.candidates.data.find((function(e){return e.id==t.shortlist.candidate_id}));this.shortlist=e.shortlist[0]}}}}},v=(a(150),a(1)),h=Object(v.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Breadcrumbs",{attrs:{title:"Shortlisted Candidates",main:"Candidates"}}),t._v(" "),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body"},[a("b-row",[a("b-col",{attrs:{md:"6"}},[a("b-input-group",{staticClass:"datatable-btn"},[a("b-form-input",{attrs:{placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-append",[a("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1),t._v(" "),a("b-col",{attrs:{md:"6"}},[a("b-form-group",{staticClass:"mb-0 datatable-select",attrs:{"label-cols":"2",label:"Per page"}},[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.candidates.perPage,callback:function(e){t.$set(t.candidates,"perPage",e)},expression:"candidates.perPage"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"table-responsive datatable-vue"},[a("b-table",{attrs:{"show-empty":"",stacked:"md",items:t.candidates.data,fields:t.tableFields},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[t.$can("view-candidate")?a("router-link",{staticClass:"text-muted",attrs:{title:"View",to:{name:"candidates.view",params:{id:e.item.id}}}},[a("i",{staticClass:"fa fa-eye"})]):t._e(),t._v(" "),t.$can("view-shortlist-notes")?a("a",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-employer-candidate-notes",modifiers:{"modal-employer-candidate-notes":!0}}],staticClass:"text-muted",attrs:{href:"#",title:"View Notes"},on:{click:function(a){a.preventDefault(),t.shortlist=e.item.shortlist[0]}}},[a("i",{staticClass:"fa fa-comment"})]):t._e()]}}])})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.candidates.count,"per-page":t.candidates.perPage},model:{value:t.candidates.page,callback:function(e){t.$set(t.candidates,"page",e)},expression:"candidates.page"}})],1)],1)])])])]),t._v(" "),t.$can("view-shortlist-notes")?a("b-modal",{staticClass:"theme-modal",attrs:{"hide-footer":"",id:"modal-employer-candidate-notes",title:"Your Notes","ok-title":"Shortlist","ok-variant":"primary"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[t.shortlist?a("div",{staticClass:"timeline-content"},[a("div",{staticClass:"social-chat mt-0"},[a("div",{staticClass:"your-msg m-0"},[a("div",{staticClass:"media"},[a("div",{staticClass:"media-body mb-1"},[a("span",{staticClass:"f-w-600"},[t._v(t._s(t.user.name)+"\n                    "),a("span",[t._v("\n                      "+t._s(t.shortlist.shortlisted_ago)+"\n                      "),a("i",{staticClass:"fa fa-reply font-primary"})])]),t._v(" "),a("p",{staticClass:"m-0"},[a("strong",[t._v("You wants to contact via: ")]),t._v(t._s(t.shortlist.contact_via))]),t._v(" "),a("p",{staticClass:"m-0"},[a("strong",[t._v("Your Notes: ")]),t._v(t._s(t.shortlist.employer_notes))])])])]),t._v(" "),t._l(t.shortlist.comments,(function(e,s){return a("div",{key:s,staticClass:"your-msg m-0"},[a("div",{staticClass:"media"},[a("div",{staticClass:"media-body mb-1"},[a("span",{staticClass:"f-w-600"},[t._v(t._s(e.commented_by)+"\n                    "),a("span",[t._v("\n                      "+t._s(e.commented_ago)+"\n                      "),a("i",{staticClass:"fa fa-reply font-primary"})])]),t._v(" "),a("p",{staticClass:"m-0"},[t._v(t._s(e.body))])])])])}))],2),t._v(" "),t.$can("respond-admin")?a("div",{staticClass:"comments-box"},[a("div",{staticClass:"media"},[a("form",{staticClass:"media-body",on:{submit:function(e){return e.preventDefault(),t.addShortlistedComment(e)}}},[a("div",{staticClass:"input-group text-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.shortlistedComment.body,expression:"shortlistedComment.body"}],staticClass:"form-control input-txt-bx",class:{"is-invalid":t.shortlistedComment.errors.has("body")},attrs:{type:"text",name:"message-to-send",placeholder:"Respond"},domProps:{value:t.shortlistedComment.body},on:{input:function(e){e.target.composing||t.$set(t.shortlistedComment,"body",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.shortlistedComment,field:"body"}})],1)])])]):t._e()]):t._e()])])]):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header d-flex justify-content-between"},[e("div",{staticClass:"card-title"},[e("h5",[this._v("Shortlisted Candidates")]),e("span",[this._v("List of all Shortlisted Candidates")])])])}],!1,null,null,null);e.default=h.exports},86:function(t,e,a){var s=a(151);"string"==typeof s&&(s=[[t.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a(9)(s,i);s.locals&&(t.exports=s.locals)}}]);