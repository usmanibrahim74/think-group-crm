(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{131:function(o,e){o.exports="/images/Pattern.bdabd0.png"},132:function(o,e){o.exports="/images/close-icon.50104a.png"},133:function(o,e){o.exports="/images/codecanyon.e952c9.png"},134:function(o,e){o.exports="/images/favicon.618b98.png"},135:function(o,e){o.exports="/images/js-grid.2aded5.png"},136:function(o,e){o.exports="/images/location.31be14.png"},137:function(o,e){o.exports="/images/logo-light.8400f1.png"},138:function(o,e){o.exports="/images/no-image.d07666.png"},139:function(o,e){o.exports="/images/search-not-found.5f1e7d.png"},140:function(o,e){o.exports="/images/secondhandm.a16687.png"},141:function(o,e){o.exports="/images/smiley.cea767.png"},142:function(o,e){o.exports="/images/sort_asc.4a3a75.png"},143:function(o,e){o.exports="/images/sort_asc_disabled.4a3a75.png"},144:function(o,e){o.exports="/images/sort_both.4a3a75.png"},145:function(o,e){o.exports="/images/sort_desc.4a3a75.png"},146:function(o,e){o.exports="/images/sort_desc_disabled.4a3a75.png"},147:function(o,e){o.exports="/images/vuelogo.82b9c7.png"},59:function(o,e,t){"use strict";t.r(e);var s=t(0),r=t.n(s),a=t(3),i=t.n(a),n=(t(2),t(4)),l=t(31),c=t.n(l);t(87);function m(o,e,t,s,r,a,i){try{var n=o[a](i),l=n.value}catch(o){return void t(o)}n.done?e(l):Promise.resolve(l).then(s,r)}function p(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.push.apply(t,s)}return t}function f(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var d={name:"EditEmployerProfile",middleware:["auth","permission:update-employer-profile"],data:function(){return{form:new i.a({name:"",display_name:"",email:"",phone:"",address_1:"",address_2:"",city:"",postcode:"",notes:"",logo:null}),logo:null,imageSrc:"",cropImg:null}},created:function(){var o=this.$route.params.id;this.$store.dispatch("employers/fetchProfile",{employer_id:o})},components:{VueCropper:c.a},computed:function(o){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?p(Object(t),!0).forEach((function(e){f(o,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(t,e))}))}return o}({},Object(n.c)({profile:function(o){return o.employers.profile}})),methods:{zoominImage:function(){console.log(this.$refs),this.$refs.cropper.relativeZoom(.1)},zoomoutImage:function(){this.$refs.cropper.relativeZoom(-.1)},getNoImgUrl:function(){return t(85)("./no-image.png")},generateImage:function(){this.imageData=this.$refs.cropper.getData(),this.cropImg=this.$refs.cropper.getCroppedCanvas().toDataURL()},recropImage:function(){this.cropImg=null},cropImage:function(){},updateImage:function(){var o=this;if(this.cropImg=null,this.logo){this.imageSrc=null;var e=new FileReader;e.onload=function(e){o.imageSrc=e.target.result},e.onerror=function(o){alert(o)},e.readAsDataURL(this.logo)}else this.imageSrc=null},update:function(){var o,e=this;return(o=r.a.mark((function o(){var t,s;return r.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e.form.logo=e.cropImg,o.prev=1,o.next=4,e.form.put("/api/employers/profiles/"+e.profile.id);case 4:t=o.sent,s=t.data,e.$alert(s.message,s.status),e.$router.push("/employers/profiles"),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(1),console.log(o.t0);case 13:case"end":return o.stop()}}),o,null,[[1,10]])})),function(){var e=this,t=arguments;return new Promise((function(s,r){var a=o.apply(e,t);function i(o){m(a,s,r,i,n,"next",o)}function n(o){m(a,s,r,i,n,"throw",o)}i(void 0)}))})()}},watch:{profile:{deep:!0,handler:function(){this.form.name=this.profile.name,this.form.display_name=this.profile.display_name,this.form.email=this.profile.email,this.form.phone=this.profile.phone,this.form.address_1=this.profile.address_1,this.form.address_2=this.profile.address_2,this.form.city=this.profile.city,this.form.postcode=this.profile.postcode,this.form.notes=this.profile.notes,this.form.logo=this.profile.logo}}}},u=(t(15),t(1)),v=Object(u.a)(d,(function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",[t("Breadcrumbs",{attrs:{title:"Edit Employer Profile",main:"Employers"}}),o._v(" "),t("div",{staticClass:"container-fluid"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"card"},[o._m(0),o._v(" "),t("div",{staticClass:"card-body"},[t("b-form",{staticClass:"needs-validation",on:{submit:function(e){return e.preventDefault(),o.update(e)}}},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[o._v("Name:")]),o._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:o.form.name,expression:"form.name"}],staticClass:"form-control",class:{"is-invalid":o.form.errors.has("name")},attrs:{type:"text"},domProps:{value:o.form.name},on:{input:function(e){e.target.composing||o.$set(o.form,"name",e.target.value)}}}),o._v(" "),t("has-error",{attrs:{form:o.form,field:"name"}})],1)]),o._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[o._v("Display Name:")]),o._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:o.form.display_name,expression:"form.display_name"}],staticClass:"form-control",class:{"is-invalid":o.form.errors.has("display_name")},attrs:{type:"text"},domProps:{value:o.form.display_name},on:{input:function(e){e.target.composing||o.$set(o.form,"display_name",e.target.value)}}}),o._v(" "),t("has-error",{attrs:{form:o.form,field:"display_name"}})],1)]),o._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[o._v("Email")]),o._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:o.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":o.form.errors.has("email")},attrs:{type:"email"},domProps:{value:o.form.email},on:{input:function(e){e.target.composing||o.$set(o.form,"email",e.target.value)}}}),o._v(" "),t("has-error",{attrs:{form:o.form,field:"email"}})],1)]),o._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[o._v("Phone")]),o._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:o.form.phone,expression:"form.phone",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":o.form.errors.has("phone")},attrs:{type:"number"},domProps:{value:o.form.phone},on:{input:function(e){e.target.composing||o.$set(o.form,"phone",o._n(e.target.value))},blur:function(e){return o.$forceUpdate()}}}),o._v(" "),t("has-error",{attrs:{form:o.form,field:"phone"}})],1)]),o._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[o._v("City")]),o._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:o.form.city,expression:"form.city"}],staticClass:"form-control",class:{"is-invalid":o.form.errors.has("city")},attrs:{type:"text"},domProps:{value:o.form.city},on:{input:function(e){e.target.composing||o.$set(o.form,"city",e.target.value)}}}),o._v(" "),t("has-error",{attrs:{form:o.form,field:"city"}})],1)]),o._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[o._v("Postcode")]),o._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:o.form.postcode,expression:"form.postcode"}],staticClass:"form-control",class:{"is-invalid":o.form.errors.has("postcode")},attrs:{type:"text"},domProps:{value:o.form.postcode},on:{input:function(e){e.target.composing||o.$set(o.form,"postcode",e.target.value)}}}),o._v(" "),t("has-error",{attrs:{form:o.form,field:"postcode"}})],1)]),o._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[o._v("Address Line 1")]),o._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:o.form.address_1,expression:"form.address_1"}],staticClass:"form-control",class:{"is-invalid":o.form.errors.has("address_1")},attrs:{type:"text"},domProps:{value:o.form.address_1},on:{input:function(e){e.target.composing||o.$set(o.form,"address_1",e.target.value)}}}),o._v(" "),t("has-error",{attrs:{form:o.form,field:"address_1"}})],1)]),o._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[o._v("Address Line 2")]),o._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:o.form.address_2,expression:"form.address_2"}],staticClass:"form-control",class:{"is-invalid":o.form.errors.has("address_2")},attrs:{type:"text"},domProps:{value:o.form.address_2},on:{input:function(e){e.target.composing||o.$set(o.form,"address_2",e.target.value)}}}),o._v(" "),t("has-error",{attrs:{form:o.form,field:"address_2"}})],1)]),o._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[o._v("Notes")]),o._v(" "),t("div",{staticClass:"col-sm-9"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:o.form.notes,expression:"form.notes"}],staticClass:"form-control",class:{"is-invalid":o.form.errors.has("notes")},domProps:{value:o.form.notes},on:{input:function(e){e.target.composing||o.$set(o.form,"notes",e.target.value)}}}),o._v(" "),t("has-error",{attrs:{form:o.form,field:"notes"}})],1)]),o._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-form-label col-sm-3"},[o._v("Logo")]),o._v(" "),t("div",{staticClass:"col-sm-4"},[t("b-form-file",{staticClass:"d-none",class:{"is-invalid":o.form.errors.has("logo")},attrs:{accept:"image/jpeg, image/png",id:"logo",state:Boolean(o.form.logo),placeholder:"Choose files","drop-placeholder":"Drop files here..."},on:{input:o.updateImage},model:{value:o.logo,callback:function(e){o.logo=e},expression:"logo"}}),o._v(" "),o.logo?o._e():t("div",[t("img",{staticClass:"w-100",attrs:{src:"/storage/"+o.form.logo,alt:""}}),o._v(" "),t("b-button-group",{staticClass:"mt-2"},[t("label",{staticClass:"btn btn-primary m-0",attrs:{for:"logo"}},[t("i",{staticClass:"fa fa-camera"})])])],1),o._v(" "),o.imageSrc&&!o.cropImg?t("div",[t("vue-cropper",{ref:"cropper",attrs:{guides:!0,"view-mode":0,"drag-mode":"crop",aspectRatio:1.777,"auto-crop-area":.7,"min-container-width":250,"min-container-height":100,background:!0,rotatable:!0,movable:!0,src:o.imageSrc,alt:"Source Image",crop:o.cropImage,"img-style":{width:"200px",height:"150px"}}}),o._v(" "),t("div",{staticClass:"mt-2 text-center"},[t("b-button-group",[t("b-button",{attrs:{variant:"outline-primary"},on:{click:o.zoominImage}},[t("i",{staticClass:"fa fa-search-plus"})]),o._v(" "),t("b-button",{attrs:{variant:"outline-primary"},on:{click:o.zoomoutImage}},[t("i",{staticClass:"fa fa-search-minus"})]),o._v(" "),t("b-button",{attrs:{variant:"outline-primary"},on:{click:o.generateImage}},[t("i",{staticClass:"fa fa-check"})])],1)],1)],1):o._e(),o._v(" "),o.cropImg?t("div",[t("img",{staticClass:"w-100",attrs:{src:o.cropImg,alt:""}}),o._v(" "),t("b-button-group",{staticClass:"mt-2"},[t("label",{staticClass:"btn btn-primary m-0",attrs:{for:"logo"}},[t("i",{staticClass:"fa fa-camera"})]),o._v(" "),t("button",{staticClass:"btn btn-primary",on:{click:o.recropImage}},[t("i",{staticClass:"fa fa-crop"})])])],1):o._e(),o._v(" "),t("has-error",{attrs:{form:o.form,field:"logo"}})],1)])]),o._v(" "),t("div",{staticClass:"col-12 text-right"},[t("v-button",{attrs:{loading:o.form.busy}},[o._v("Update Employer")])],1)])])],1)])])])])],1)}),[function(){var o=this.$createElement,e=this._self._c||o;return e("div",{staticClass:"card-header"},[e("h5",[this._v("Edit Employer Profile")]),e("span",[this._v("Edit this profile")])])}],!1,null,null,null);e.default=v.exports},85:function(o,e,t){var s={"./Pattern.png":131,"./close-icon.png":132,"./codecanyon.png":133,"./details_close.png":250,"./details_open.png":249,"./endless-logo.png":29,"./favicon.png":134,"./js-grid.png":135,"./location.png":136,"./logo-light.png":137,"./no-image.png":138,"./search-not-found.png":139,"./secondhandm.png":140,"./smiley.png":141,"./sort_asc.png":142,"./sort_asc_disabled.png":143,"./sort_both.png":144,"./sort_desc.png":145,"./sort_desc_disabled.png":146,"./vuelogo.png":147};function r(o){var e=a(o);return t(e)}function a(o){if(!t.o(s,o)){var e=new Error("Cannot find module '"+o+"'");throw e.code="MODULE_NOT_FOUND",e}return s[o]}r.keys=function(){return Object.keys(s)},r.resolve=a,o.exports=r,r.id=85}}]);