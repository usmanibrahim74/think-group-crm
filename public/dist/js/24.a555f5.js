(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{55:function(r,e,a){"use strict";a.r(e);var t=a(0),o=a.n(t),s=a(3),n=a.n(s),c=(a(2),a(4)),i=a(13);function l(r,e,a,t,o,s,n){try{var c=r[s](n),i=c.value}catch(r){return void a(r)}c.done?e(i):Promise.resolve(i).then(t,o)}function m(r){return function(){var e=this,a=arguments;return new Promise((function(t,o){var s=r.apply(e,a);function n(r){l(s,t,o,n,c,"next",r)}function c(r){l(s,t,o,n,c,"throw",r)}n(void 0)}))}}function d(r,e){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.push.apply(a,t)}return a}function u(r,e,a){return e in r?Object.defineProperty(r,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[e]=a,r}var p={name:"EditEmployerAccount",middleware:["auth","permission:update-employer-account"],data:function(){return{form:new n.a({profile:null,name:"",email:""}),changePasswordForm:new n.a({password:"",password_confirmation:""})}},components:{Multiselect:a.n(i).a},created:function(){this.$store.dispatch("employers/fetchAllProfiles");var r=this.$route.params.id;this.$store.dispatch("employers/fetchAccount",{account_id:r})},computed:function(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){u(r,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))}))}return r}({},Object(c.c)({profiles:function(r){return r.employers.all_profiles},account:function(r){return r.employers.account}})),methods:{update:function(){var r=this;return m(o.a.mark((function e(){var a,t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(r.form),e.next=4,r.form.put("/api/employers/accounts/"+r.account.id);case 4:a=e.sent,t=a.data,r.$alert(t.message,t.status),r.$router.push("/employers/accounts"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),r.$error("some error occurred");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},changePassword:function(r){var e=this;return m(o.a.mark((function a(){var t,s;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.prev=1,a.next=4,e.changePasswordForm.put("/api/employers/accounts/"+e.account.id+"/change-password");case 4:t=a.sent,s=t.data,e.$alert(s.message,s.status),e.$bvModal.hide("modal-change-account-password"),e.changePasswordForm.reset(),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0),e.$error("Some error occurred");case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))()}},watch:{account:{deep:!0,handler:function(){this.form.profile=this.account.profile,this.form.name=this.account.name,this.form.email=this.account.email}}}},f=(a(17),a(1)),v=Object(f.a)(p,(function(){var r=this,e=r.$createElement,a=r._self._c||e;return a("div",[a("Breadcrumbs",{attrs:{title:"Edit Employer Account",main:"Employers"}}),r._v(" "),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[r._m(0),r._v(" "),a("div",{staticClass:"card-body"},[a("b-form",{staticClass:"needs-validation",on:{submit:function(e){return e.preventDefault(),r.update(e)}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",[r._v("Select Employer")]),r._v(" "),a("multiselect",{class:{"is-invalid":r.form.errors.has("profile")},attrs:{placeholder:"Select Employer",label:"name","track-by":"id",options:r.profiles},model:{value:r.form.profile,callback:function(e){r.$set(r.form,"profile",e)},expression:"form.profile"}}),r._v(" "),a("has-error",{attrs:{form:r.form,field:"profile"}})],1)]),r._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[r._v("Name")]),r._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:r.form.name,expression:"form.name"}],staticClass:"form-control",class:{"is-invalid":r.form.errors.has("name")},attrs:{type:"text"},domProps:{value:r.form.name},on:{input:function(e){e.target.composing||r.$set(r.form,"name",e.target.value)}}}),r._v(" "),a("has-error",{attrs:{form:r.form,field:"name"}})],1)]),r._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[r._v("Email")]),r._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:r.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":r.form.errors.has("email")},attrs:{type:"email"},domProps:{value:r.form.email},on:{input:function(e){e.target.composing||r.$set(r.form,"email",e.target.value)}}}),r._v(" "),a("has-error",{attrs:{form:r.form,field:"email"}})],1)]),r._v(" "),a("div",{staticClass:"col-12 text-right"},[a("a",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-change-account-password",modifiers:{"modal-change-account-password":!0}}],staticClass:"btn btn-info",attrs:{href:"#"}},[r._v("\n                    Change Password\n                  ")]),r._v(" "),a("v-button",{attrs:{loading:r.form.busy}},[r._v("Update Account")])],1)])])],1)])])])]),r._v(" "),a("b-modal",{staticClass:"theme-modal",attrs:{id:"modal-change-account-password",centered:"",title:"Change Account Password","ok-title":"Change Password","ok-variant":"primary"},on:{ok:r.changePassword}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[r._v("Password")]),r._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:r.changePasswordForm.password,expression:"changePasswordForm.password"}],staticClass:"form-control",class:{"is-invalid":r.changePasswordForm.errors.has("password")},attrs:{type:"password"},domProps:{value:r.changePasswordForm.password},on:{input:function(e){e.target.composing||r.$set(r.changePasswordForm,"password",e.target.value)}}}),r._v(" "),a("has-error",{attrs:{form:r.changePasswordForm,field:"password"}})],1),r._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[r._v("Conform Password")]),r._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:r.changePasswordForm.password_confirmation,expression:"changePasswordForm.password_confirmation"}],staticClass:"form-control",class:{"is-invalid":r.changePasswordForm.errors.has("password_confirmation")},attrs:{type:"password"},domProps:{value:r.changePasswordForm.password_confirmation},on:{input:function(e){e.target.composing||r.$set(r.changePasswordForm,"password_confirmation",e.target.value)}}}),r._v(" "),a("has-error",{attrs:{form:r.changePasswordForm,field:"password_confirmation"}})],1)])])])],1)}),[function(){var r=this.$createElement,e=this._self._c||r;return e("div",{staticClass:"card-header"},[e("h5",[this._v("Edit Employer Account")]),e("span",[this._v("Edit this employer account")])])}],!1,null,null,null);e.default=v.exports}}]);