(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{124:function(e,t){e.exports="/images/Pattern.bdabd0.png"},125:function(e,t){e.exports="/images/close-icon.50104a.png"},126:function(e,t){e.exports="/images/codecanyon.e952c9.png"},127:function(e,t){e.exports="/images/favicon.618b98.png"},128:function(e,t){e.exports="/images/js-grid.2aded5.png"},129:function(e,t){e.exports="/images/location.31be14.png"},130:function(e,t){e.exports="/images/logo-light.8400f1.png"},131:function(e,t){e.exports="/images/no-image.d07666.png"},132:function(e,t){e.exports="/images/search-not-found.5f1e7d.png"},133:function(e,t){e.exports="/images/secondhandm.a16687.png"},134:function(e,t){e.exports="/images/smiley.cea767.png"},135:function(e,t){e.exports="/images/sort_asc.4a3a75.png"},136:function(e,t){e.exports="/images/sort_asc_disabled.4a3a75.png"},137:function(e,t){e.exports="/images/sort_both.4a3a75.png"},138:function(e,t){e.exports="/images/sort_desc.4a3a75.png"},139:function(e,t){e.exports="/images/sort_desc_disabled.4a3a75.png"},140:function(e,t){e.exports="/images/vuelogo.82b9c7.png"},58:function(e,t,o){"use strict";o.r(t);var s=o(0),r=o.n(s),a=o(3),i=o.n(a),n=(o(2),o(4)),l=o(30),c=o.n(l);o(81);function m(e,t,o,s,r,a,i){try{var n=e[a](i),l=n.value}catch(e){return void o(e)}n.done?t(l):Promise.resolve(l).then(s,r)}function p(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}function f(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var d={name:"EditEmployerProfile",middleware:["auth","permission:update-employer-profile"],data:function(){return{form:new i.a({name:"",display_name:"",email:"",phone:"",address_1:"",address_2:"",city:"",postcode:"",notes:"",logo:null}),logo:null,imageSrc:"",cropImg:null}},created:function(){var e=this.$route.params.id;this.$store.dispatch("employers/fetchProfile",{employer_id:e})},components:{VueCropper:c.a},computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?p(Object(o),!0).forEach((function(t){f(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},Object(n.c)({profile:function(e){return e.employers.profile}})),methods:{zoominImage:function(){console.log(this.$refs),this.$refs.cropper.relativeZoom(.1)},zoomoutImage:function(){this.$refs.cropper.relativeZoom(-.1)},getNoImgUrl:function(){return o(80)("./no-image.png")},generateImage:function(){this.imageData=this.$refs.cropper.getData(),this.cropImg=this.$refs.cropper.getCroppedCanvas().toDataURL()},recropImage:function(){this.cropImg=null},cropImage:function(){},updateImage:function(){var e=this;if(this.cropImg=null,this.logo){this.imageSrc=null;var t=new FileReader;t.onload=function(t){e.imageSrc=t.target.result},t.onerror=function(e){alert(e)},t.readAsDataURL(this.logo)}else this.imageSrc=null},update:function(){var e,t=this;return(e=r.a.mark((function e(){var o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.form.logo=t.cropImg,e.prev=1,e.next=4,t.form.put("/api/employers/profiles/"+t.profile.id);case 4:o=e.sent,s=o.data,t.$alert(s.message,s.status),t.$router.push("/employers/profiles"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,o=arguments;return new Promise((function(s,r){var a=e.apply(t,o);function i(e){m(a,s,r,i,n,"next",e)}function n(e){m(a,s,r,i,n,"throw",e)}i(void 0)}))})()}},watch:{profile:{deep:!0,handler:function(){this.form.name=this.profile.name,this.form.display_name=this.profile.display_name,this.form.email=this.profile.email,this.form.phone=this.profile.phone,this.form.address_1=this.profile.address_1,this.form.address_2=this.profile.address_2,this.form.city=this.profile.city,this.form.postcode=this.profile.postcode,this.form.notes=this.profile.notes,this.form.logo=this.profile.logo}}}},u=(o(17),o(1)),g=Object(u.a)(d,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Breadcrumbs",{attrs:{title:"Edit Employer Profile",main:"Employers"}}),e._v(" "),o("div",{staticClass:"container-fluid"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12"},[o("div",{staticClass:"card"},[e._m(0),e._v(" "),o("div",{staticClass:"card-body"},[o("b-form",{staticClass:"needs-validation",on:{submit:function(t){return t.preventDefault(),e.update(t)}}},[o("div",{staticClass:"form-row"},[o("div",{staticClass:"col-md-8"},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-form-label"},[e._v("Name")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("name")},attrs:{type:"text"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}}),e._v(" "),o("has-error",{attrs:{form:e.form,field:"name"}})],1),e._v(" "),o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-form-label"},[e._v("Display Name")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.display_name,expression:"form.display_name"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("display_name")},attrs:{type:"text"},domProps:{value:e.form.display_name},on:{input:function(t){t.target.composing||e.$set(e.form,"display_name",t.target.value)}}}),e._v(" "),o("has-error",{attrs:{form:e.form,field:"display_name"}})],1),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-form-label"},[e._v("Email")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("email")},attrs:{type:"email"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}}),e._v(" "),o("has-error",{attrs:{form:e.form,field:"email"}})],1)]),e._v(" "),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-form-label"},[e._v("Phone")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.phone,expression:"form.phone",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("phone")},attrs:{type:"number"},domProps:{value:e.form.phone},on:{input:function(t){t.target.composing||e.$set(e.form,"phone",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),o("has-error",{attrs:{form:e.form,field:"phone"}})],1)])])]),e._v(" "),o("div",{staticClass:"col-md-4"},[o("div",{staticClass:"form-group mb-0",class:{"is-invalid":e.form.errors.has("logo")}},[o("label",{staticClass:"col-form-label"},[e._v("Logo")]),e._v(" "),o("b-form-file",{staticClass:"d-none",class:{"is-invalid":e.form.errors.has("logo")},attrs:{accept:"image/jpeg, image/png",id:"logo",state:Boolean(e.form.logo),placeholder:"Choose files","drop-placeholder":"Drop files here..."},on:{input:e.updateImage},model:{value:e.logo,callback:function(t){e.logo=t},expression:"logo"}})],1),e._v(" "),e.logo?e._e():o("div",{staticClass:"text-center"},[o("img",{staticClass:"w-100",attrs:{src:"/storage/"+e.form.logo,alt:""}}),e._v(" "),o("b-button-group",{staticClass:"mt-2"},[o("label",{staticClass:"btn btn-primary m-0",attrs:{for:"logo"}},[o("i",{staticClass:"fa fa-camera"})])])],1),e._v(" "),e.imageSrc&&!e.cropImg?o("div",[o("vue-cropper",{ref:"cropper",attrs:{guides:!0,"view-mode":0,"drag-mode":"crop",aspectRatio:1.777,"auto-crop-area":.7,"min-container-width":250,"min-container-height":100,background:!0,rotatable:!0,movable:!0,src:e.imageSrc,alt:"Source Image",crop:e.cropImage,"img-style":{width:"200px",height:"150px"}}}),e._v(" "),o("div",{staticClass:"mt-2 text-center"},[o("b-button-group",[o("b-button",{attrs:{variant:"outline-primary"},on:{click:e.zoominImage}},[o("i",{staticClass:"fa fa-search-plus"})]),e._v(" "),o("b-button",{attrs:{variant:"outline-primary"},on:{click:e.zoomoutImage}},[o("i",{staticClass:"fa fa-search-minus"})]),e._v(" "),o("b-button",{attrs:{variant:"outline-primary"},on:{click:e.generateImage}},[o("i",{staticClass:"fa fa-check"})])],1)],1)],1):e._e(),e._v(" "),e.cropImg?o("div",{staticClass:"text-center"},[o("img",{staticClass:"w-100",attrs:{src:e.cropImg,alt:""}}),e._v(" "),o("b-button-group",{staticClass:"mt-2"},[o("label",{staticClass:"btn btn-primary m-0",attrs:{for:"logo"}},[o("i",{staticClass:"fa fa-camera"})]),e._v(" "),o("button",{staticClass:"btn btn-primary",on:{click:e.recropImage}},[o("i",{staticClass:"fa fa-crop"})])])],1):e._e(),e._v(" "),o("has-error",{staticClass:"text-center",attrs:{form:e.form,field:"logo"}})],1),e._v(" "),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-form-label"},[e._v("City")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.city,expression:"form.city"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("city")},attrs:{type:"text"},domProps:{value:e.form.city},on:{input:function(t){t.target.composing||e.$set(e.form,"city",t.target.value)}}}),e._v(" "),o("has-error",{attrs:{form:e.form,field:"city"}})],1)]),e._v(" "),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-form-label"},[e._v("Postcode")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.postcode,expression:"form.postcode"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("postcode")},attrs:{type:"text"},domProps:{value:e.form.postcode},on:{input:function(t){t.target.composing||e.$set(e.form,"postcode",t.target.value)}}}),e._v(" "),o("has-error",{attrs:{form:e.form,field:"postcode"}})],1)]),e._v(" "),o("div",{staticClass:"col-md-12"},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-form-label"},[e._v("Address Line 1")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.address_1,expression:"form.address_1"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("address_1")},attrs:{type:"text"},domProps:{value:e.form.address_1},on:{input:function(t){t.target.composing||e.$set(e.form,"address_1",t.target.value)}}}),e._v(" "),o("has-error",{attrs:{form:e.form,field:"address_1"}})],1)]),e._v(" "),o("div",{staticClass:"col-md-12"},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-form-label"},[e._v("Address Line 2")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.address_2,expression:"form.address_2"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("address_2")},attrs:{type:"text"},domProps:{value:e.form.address_2},on:{input:function(t){t.target.composing||e.$set(e.form,"address_2",t.target.value)}}}),e._v(" "),o("has-error",{attrs:{form:e.form,field:"address_2"}})],1)]),e._v(" "),o("div",{staticClass:"col-12"},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-form-label"},[e._v("Notes")]),e._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.notes,expression:"form.notes"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("notes")},domProps:{value:e.form.notes},on:{input:function(t){t.target.composing||e.$set(e.form,"notes",t.target.value)}}}),e._v(" "),o("has-error",{attrs:{form:e.form,field:"notes"}})],1)]),e._v(" "),o("div",{staticClass:"col-12 text-right"},[o("v-button",{attrs:{loading:e.form.busy}},[e._v("Update Employer")])],1)])])],1)])])])])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header"},[t("h5",[this._v("Edit Employer Profile")]),t("span",[this._v("Edit this profile")])])}],!1,null,null,null);t.default=g.exports},80:function(e,t,o){var s={"./Pattern.png":124,"./close-icon.png":125,"./codecanyon.png":126,"./details_close.png":239,"./details_open.png":238,"./endless-logo.png":28,"./favicon.png":127,"./js-grid.png":128,"./location.png":129,"./logo-light.png":130,"./no-image.png":131,"./search-not-found.png":132,"./secondhandm.png":133,"./smiley.png":134,"./sort_asc.png":135,"./sort_asc_disabled.png":136,"./sort_both.png":137,"./sort_desc.png":138,"./sort_desc_disabled.png":139,"./vuelogo.png":140};function r(e){var t=a(e);return o(t)}function a(e){if(!o.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=a,e.exports=r,r.id=80}}]);