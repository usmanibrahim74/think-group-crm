(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{20:function(e,t,a){"use strict";a.r(t);var r=a(0),i=a.n(r),s=a(4),l=a(2),o=a.n(l);a(3);function n(e,t,a,r,i,s,l){try{var o=e[s](l),n=o.value}catch(e){return void a(e)}o.done?t(n):Promise.resolve(n).then(r,i)}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f={name:"ViewEmployerProfiles",middleware:["auth","permission:view-employer-profile"],data:function(){return{tableFields:[{key:"name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"city",label:"City",sortable:!0},{key:"notes",label:"Notes",sortable:!0},"actions"],filter:"",pageOptions:[5,10,15],delete_id:0,timeout:0}},created:function(){this.fetchData()},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(s.c)({profiles:function(e){return e.employers.profiles}})),methods:{remove:function(){var e,t=this;return(e=i.a.mark((function e(){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.delete("/api/employers/profiles/"+t.delete_id);case 3:a=e.sent,r=a.data,t.fetchData(),t.$alert(r.message,r.status),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.$error("some error occurred");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function l(e){n(s,r,i,l,o,"next",e)}function o(e){n(s,r,i,l,o,"throw",e)}l(void 0)}))})()},filterData:function(){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.fetchData()}),300)},fetchData:function(){this.$store.dispatch("employers/fetchProfiles",{search:this.filter})}},watch:{filter:{handler:function(){this.filterData()}},"profiles.page":{handler:function(){this.filterData()}},"profiles.perPage":{handler:function(){this.filterData()}}}},d=a(1),u=Object(d.a)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Breadcrumbs",{attrs:{title:"Employer Profiles",main:"Employers"}}),e._v(" "),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[e._m(0),e._v(" "),a("div",{staticClass:"card-body"},[a("b-row",[a("b-col",{attrs:{md:"6"}},[a("b-input-group",{staticClass:"datatable-btn"},[a("b-form-input",{attrs:{placeholder:"Type to Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),a("b-input-group-append",[a("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear")])],1)],1)],1),e._v(" "),a("b-col",{attrs:{md:"6"}},[a("b-form-group",{staticClass:"mb-0 datatable-select",attrs:{"label-cols":"2",label:"Per page"}},[a("b-form-select",{attrs:{options:e.pageOptions},model:{value:e.profiles.perPage,callback:function(t){e.$set(e.profiles,"perPage",t)},expression:"profiles.perPage"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"table-responsive datatable-vue"},[a("b-table",{attrs:{"show-empty":"",stacked:"md",items:e.profiles.data,fields:e.tableFields},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[e.$can("view-employer-profile")?a("router-link",{staticClass:"text-muted",attrs:{title:"View",to:{name:"employers.profiles.view",params:{id:t.item.id}}}},[a("i",{staticClass:"fa fa-eye"})]):e._e(),e._v(" "),e.$can("update-employer-profile")?a("router-link",{staticClass:"text-muted",attrs:{title:"Edit",to:{name:"employers.profiles.edit",params:{id:t.item.id}}}},[a("i",{staticClass:"fa fa-edit"})]):e._e(),e._v(" "),e.$can("manage-employer-candidates")?a("router-link",{staticClass:"text-muted",attrs:{title:"Attach Candidates",to:{name:"employers.profiles.candidates",params:{id:t.item.id}}}},[a("i",{staticClass:"fa fa-users"})]):e._e(),e._v(" "),e.$can("delete-employer-profile")?a("a",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-delete-employer-profile",modifiers:{"modal-delete-employer-profile":!0}}],staticClass:"text-muted",attrs:{href:"#",title:"Delete"},on:{click:function(a){a.preventDefault(),e.delete_id=t.item.id}}},[a("i",{staticClass:"fa fa-trash"})]):e._e()]}}])})],1),e._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":e.profiles.count,"per-page":e.profiles.perPage},model:{value:e.profiles.page,callback:function(t){e.$set(e.profiles,"page",t)},expression:"profiles.page"}})],1)],1)])])])]),e._v(" "),a("b-modal",{staticClass:"theme-modal",attrs:{id:"modal-delete-employer-profile",size:"sm",centered:"",title:"Delete Employer Profile","ok-title":"Delete","ok-variant":"danger"},on:{ok:e.remove}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",[e._v("Are you sure you want to delete this employer profile?")])])])])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header d-flex justify-content-between"},[t("div",{staticClass:"card-title"},[t("h5",[this._v("Employers")]),t("span",[this._v("List of all Employers")])]),this._v(" "),t("div",{staticClass:"card-buttons"})])}],!1,null,null,null);t.default=u.exports}}]);